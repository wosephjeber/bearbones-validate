/*! form-validator 2014-11-28 */
var FormValidator=function(a,b){var c=this;this.form=a,this.options={callback:function(){c.processing(!1),$(this).submit()},flashElement:$(".flash",c.form),submitButton:$('input[type="submit"]',c.form),showFlash:function(){$(this).slideDown(500)},showError:function(a,b){$(b).slideDown(500)},errorClass:"error",errorMessageClass:"error-message",customValidations:[]};var b=b||{};$.extend(this.options,b),this.objectivize=function(a){return a instanceof jQuery?a:$(a)},this.validate=function(){var a=c.form,b={success:!0,errors:[],messages:[]},d=0;return a.find('[type="email"]').each(function(a,d){var e=$(d).val();c.validateEmail(e)||(b.messages.push("Enter valid email address. "),b.errors.push({element:d,message:"Invalid email"}))}),a.find("[required]").each(function(a,c){var e=$(c).val(),f=$(c).attr("placeholder");""!==e&&e!==f||!$(c).is(":visible")||(d++,c=$(c).is("select")?$(c).parents(".select"):c,b.errors.push({element:c,message:"Required field"}))}),$.each(c.options.customValidations,function(a,d){var d=d,e=!1;d.element?$.each(d.element,function(a,f){var f=d.localScope?c.form.find(f):f;d.rule.call(f)||(b.errors.push({element:f,message:d.message}),e=!0)}):d.rule.call()||(e=!0),e&&b.messages.push(d.flash)}),b.errors.length>0&&(b.success=!1,d>0&&b.messages.push("Fill out all required fields. ")),b},this.validateEmail=function(a){var b=/^[0-9a-zA-Z][-.+_a-zA-Z0-9]*@([0-9a-zA-Z][-._0-9a-zA-Z]*\.)+[a-zA-Z]{2,6}$/;return b.test(a)},this.clearErrors=function(){c.form.find("."+c.options.errorClass).removeClass(c.options.errorClass),c.form.find("."+c.options.errorMessageClass).remove(),c.options.flashElement.html("")},this.displayErrors=function(a){c.clearErrors(),$.each(a.errors,function(a,b){c.displayFieldError(b.element,b.message)});var b="";$.each(a.messages,function(a,c){b+=c}),c.flash(b.trim())},this.flash=function(a){c.options.flashElement.html(a),c.options.showFlash.call(c.options.flashElement)},this.displayFieldError=function(a,b){var d=$('<div class="'+c.options.errorMessageClass+'">'+b+"</div>");$field=c.objectivize(a),$field.addClass(c.options.errorClass).after(d),c.options.showError.call(b,b,d)},this.processing=function(a){a?(c.options.submitButton.hide(),c.options.submitButton.siblings(".processing-donation").show()):(c.options.submitButton.show(),c.options.submitButton.siblings(".processing-donation").hide())},this.setUpSubmitHandler=function(){c.form.on("submit",function(){c.processing(!0);var a=c.validate();return a.success?(c.clearErrors(),c.options.callback.call(c.form)):(c.processing(!1),c.displayErrors(a)),!1})},this.setUpSubmitHandler()};